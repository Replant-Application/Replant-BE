## 📌 Summary
<!-- PR 요약을 써주세요. -->
FCM(Firebase Cloud Messaging) 푸시 알림 기능과 돌발 미션 자동 할당 기능을 구현했습니다.

## ✍️ Description
<!-- PR에 대한 자세한 설명을 써주세요. -->
- close: 

### FCM 푸시 알림 기능
- Firebase Cloud Messaging을 통한 푸시 알림 전송 기능 구현
- SSE(Server-Sent Events) 실시간 알림 실패 시 FCM으로 자동 대체 전송
- 사용자 온라인 상태(Redis) 기반 알림 전송 전략 적용
  - 온라인: SSE 우선 시도 → 실패 시 FCM 대체
  - 오프라인: FCM 푸시 알림 직접 전송
- FCM 토큰 관리: User 엔티티에 fcmToken 필드 추가 및 토큰 등록/업데이트 API 제공
- FCM 전송 실패 시 재시도 로직 구현 (최대 3회)
- 기상 미션의 경우 중요 알림으로 FCM 추가 전송 로직 구현

### 돌발 미션 자동 할당 기능
- 사용자가 설정한 시간에 맞춰 자동으로 미션을 할당하는 스케줄러 구현
- 할당되는 미션 종류:
  - **기상 시간**: 기상 미션 (10분 내 인증 필수)
  - **아침/점심/저녁 식사 시간**: 식사 관련 미션 (게시글 작성 인증)
  - **취침 시간**: 감성일기 작성 미션
- 매 1분마다 실행되는 스케줄러로 정확한 시간 매칭 보장
- 당일 중복 할당 방지 로직 (같은 타입의 미션은 하루에 1회만 할당)
- 돌발 미션 할당 시 자동 알림 전송 (SSE/FCM)

### 주요 변경사항
- `FcmService` / `FcmServiceImpl`: FCM 푸시 알림 전송 서비스 구현
- `NotificationService`: SSE/FCM 통합 알림 전송 로직 구현
- `SpontaneousMissionScheduler`: 돌발 미션 자동 할당 스케줄러 구현
- `User` 엔티티: fcmToken 필드 추가
- `SpontaneousMissionController`: 돌발 미션 설정 조회/수정 API 제공

## 💡 PR Point
<!-- 코드를 작성할 때 고민했던 부분을 적어주세요 -->

### 알림 전송 전략
- **SSE vs FCM 선택**: 사용자가 접속 중(온라인)이면 실시간성이 높은 SSE를 우선 시도하고, 실패 시 FCM으로 대체하는 전략을 채택했습니다.
- **Redis 기반 온라인 상태 관리**: SSE 연결 시 Redis에 온라인 상태를 저장하고, TTL(60초)로 자동 만료 처리하여 사용자 상태를 효율적으로 관리합니다.

### 돌발 미션 할당 로직
- **1분 단위 스케줄러**: 정확한 시간 매칭을 위해 매 분마다 스케줄러를 실행합니다. (기존 5분 단위에서 변경)
- **중복 할당 방지**: 같은 날 같은 타입의 미션(기상/식사/일기)이 이미 할당되어 있으면 재할당하지 않습니다.
- **미션 타입별 구분**: 기상 미션, 식사 미션(아침/점심/저녁), 감성일기 미션을 각각 구분하여 처리합니다.

### FCM 토큰 관리
- **User 테이블 저장**: Redis가 아닌 User 엔티티에 직접 저장하여 영구 관리합니다.
- **토큰 무효화 처리**: FCM 전송 실패 시 자동으로 토큰을 무효화하여 불필요한 재시도를 방지합니다.

### 기상 미션 특별 처리
- **10분 제한 시간**: 기상 미션은 할당 후 10분 내 인증해야 하는 중요한 미션이므로, 별도로 FCM 알림을 추가 전송합니다.
- **재시도 로직**: FCM 전송 실패 시 최대 3회까지 재시도하여 알림 전송 성공률을 높입니다.

## 📚 Reference 
<!-- 참고할 만한 자료가 있다면 링크나 시각 자료를 달아주세요. -->
- Firebase Cloud Messaging: https://firebase.google.com/docs/cloud-messaging
- Server-Sent Events (SSE): https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events

## 🔥 Test
<!-- Test -->

### FCM 푸시 알림 테스트
1. FCM 토큰 등록: `POST /api/notifications/fcm/token`
2. 알림 수신 확인 (온라인/오프라인 상태별)
3. SSE 실패 시 FCM 대체 전송 확인

### 돌발 미션 자동 할당 테스트
1. 돌발 미션 설정: `POST /api/spontaneous-missions/setup`
   - 기상 시간: `07:00`
   - 아침 식사 시간: `08:00`
   - 점심 식사 시간: `12:00`
   - 저녁 식사 시간: `18:00`
   - 취침 시간: `23:00`
2. 설정한 시간에 맞춰 미션 자동 할당 확인
3. 알림 전송 확인 (SSE/FCM)
4. 당일 중복 할당 방지 확인

### 기상 미션 인증 테스트
1. 기상 시간(설정한 시간)에 미션 자동 할당 확인
2. 10분 내 인증 시도: `POST /api/missions/my/{userMissionId}/verify-spontaneous`
3. 10분 초과 시 인증 실패 확인

## 📝 PR Comment
<!-- Comment에 대한 주의 사항입니다. -->

```
P1: 꼭 반영해주세요 (Request changes)
리뷰어는 PR의 내용이 서비스에 중대한 오류를 발생할 수 있는 가능성을 잠재하고 있는 등 중대한 코드 수정이 반드시 필요하다고 판단되는 경우, P1 태그를 통해 리뷰 요청자에게 수정을 요청합니다.

P2: 적극적으로 고려해주세요 (Request changes)
작성자는 P2에 대해 수용하거나 만약 수용할 수 없는 상황이라면 적합한 의견을 들어 토론할 것을 권장합니다.

P3: 웬만하면 반영해 주세요 (Comment)
작성자는 P3에 대해 수용하거나 만약 수용할 수 없는 상황이라면 반영할 수 없는 이유를 들어 설명하거나 다음에 반영할 계획을 명시적으로(JIRA 티켓 등으로) 표현할 것을 권장합니다.

P4: 반영해도 좋고 넘어가도 좋습니다 (Approve)
작성자는 P4에 대해서는 아무런 의견을 달지 않고 무시해도 괜찮습니다. 해당 의견을 반영하는 게 좋을지 고민해 보는 정도면 충분합니다.

P5: 그냥 사소한 의견입니다 (Approve)
작성자는 P5에 대해 아무런 의견을 달지 않고 무시해도 괜찮습니다!
```